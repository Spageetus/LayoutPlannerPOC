<canvas id="design-canvas" width="950" height="400">I am the main canvas</canvas>

<script>
    const canvas = document.getElementById("design-canvas");
    const ctx = canvas.getContext("2d");
    const defaultCellSize = 80;
    let currentZoom = 1;
    const minZoom = 0.2;
    const maxZoom = 2;
    let cellSize = defaultCellSize * currentZoom;
    let width = canvas.width;
    let height = canvas.height;

    let relWidth = width * currentZoom;
    let relHeight = height * currentZoom;

    let components = [];

    let obj = {
        row: 2,
        col: 1,
        length: 1,
        width: 1 
    };
    components.push(obj);

    obj = {
        row: 10,
        col: 20,
        length: 6,
        width:2
    };
    components.push(obj);
    drawGrid();

   

    function drawGrid()
    {
        cellSize = Math.round(defaultCellSize * currentZoom);
        relWidth = Math.round(width / currentZoom);
        relHeight = Math.round(height / currentZoom);
        let currX = 0;
        let currY = 0;
        let columns = Math.round(relWidth / cellSize) + 1;
        let rows = Math.round(relHeight /cellSize) + 1;
        

        ctx.lineWidth = 2;
        ctx.fillStyle = "black";
        ctx.beginPath();

        //TODO: Increase width of every 8th grid line (size of foundations)
        for(let i = 0; i < columns; i++)
        {
            currX += cellSize;
            currY = 0;
            ctx.moveTo(currX, currY);
            ctx.lineTo(currX, relHeight);
        }
        ctx.stroke();
        currX = 0;
        currY = 0;
        //draw horizontal lines
        for(let i = 0; i < rows; i++)
        {
            currY += cellSize;
            currX = 0;
            ctx.moveTo(currX, currY);
            ctx.lineTo(relWidth, currY);
        }
        ctx.stroke();
       
        ctx.closePath();

        drawComponents();
    }
    
    function drawComponents()
    {
        ctx.fillStyle = "red";

        for(let i = 0; i < components.length; i++)
        {
            let o = components[i];

            ctx.fillRect(o.col * cellSize, o.row * cellSize, o.width * cellSize, o.length * cellSize);
            
            
        }
       
    }

    function clearCanvas()
    {
        ctx.clearRect(0, 0, relWidth, relHeight);
    }

    function zoomOut()
    {
        console.log("Zooming Out...");
        
        //clear canvas
        clearCanvas();
        currentZoom *= 0.9;
        currentZoom = Math.round(currentZoom*100) / 100; //rounding current zoom to nearest %
        if(currentZoom < minZoom) currentZoom = minZoom;
        ctx.setTransform(currentZoom, 0, 0, currentZoom, 0, 0);
        drawGrid();
    }

    function zoomIn()
    {
        console.log("Zooming In...");
       
        //clear canvas
        clearCanvas();

        currentZoom *= 1.1;
        currentZoom = Math.round(currentZoom*100) / 100; //rounding current zoom to nearest %
        if(currentZoom > maxZoom) currentZoom = maxZoom;

        ctx.setTransform(currentZoom, 0, 0, currentZoom, 0, 0);
        drawGrid();
        
    }

</script>